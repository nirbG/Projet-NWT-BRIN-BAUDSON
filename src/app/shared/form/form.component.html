<h2 mat-dialog-title *ngIf="isUpdateMode">Update {{ form.get('firstname').value }} {{ form.get('lastname').value }}</h2>
<h2 mat-dialog-title *ngIf="!isUpdateMode">Create new person</h2>

<mat-dialog-content>
    <form novalidate [formGroup]="form">

        <p *ngIf="isUpdateMode">
            <span style="width:100%">ID (disabled)</span><br/>
            <span style="width:100%">{{model.isbn}}</span>
        </p>

        <table class="full-width" cellspacing="0">
            <tr>
                <td>
                    <mat-form-field class="full-width" [class.mgb15]="form.get('firstname').dirty && form.get('firstname').invalid">
                        <input matInput placeholder="First name" formControlName="firstname" minlength="2" required name="firstname" />
                        <mat-error *ngIf="form.get('firstname').dirty && form.get('firstname').hasError('required')">
                            First name is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('firstname').dirty && form.get('firstname').hasError('minlength')">
                            First name is <strong>2 chars min</strong>
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Last Name" formControlName="lastname" minlength="2" required name="lastname" />
                        <mat-error *ngIf="form.get('lastname').dirty && form.get('lastname').hasError('required')">
                            Last name is <strong>required</strong>
                        </mat-error>
                        <mat-error *ngIf="form.get('lastname').dirty && form.get('lastname').hasError('minlength')">
                            Last name is <strong>2 chars min</strong>
                        </mat-error>
                    </mat-form-field>
                </td>
                <td class="align-right">
                    <img width="112" src="{{ form.get('photo').value }}"/>
                    <input type="hidden" formControlName="photo" name="photo">
                </td>
            </tr>
        </table>

        <p>
            <mat-form-field class="full-width">
                <input matInput placeholder="Email" formControlName="email" required name="email" />
                <mat-error *ngIf="form.get('email').dirty && form.get('email').hasError('required')">
                    Email is <strong>required</strong>
                </mat-error>
                <mat-error *ngIf="form.get('email').dirty && !form.get('email').hasError('required') && form.get('email').hasError('googleEmail')">
                    Invalid email <strong>(ex: name.firstname@gmail.com)</strong>
                </mat-error>
            </mat-form-field>
        </p>

        <p formGroupName="address">
            <mat-form-field class="full-width">
                <input matInput placeholder="Address" formControlName="street" name="street"/>
            </mat-form-field>
        </p>

        <table class="full-width" cellspacing="0" formGroupName="address">
            <tr>
                <td>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="City" formControlName="city" name="city"/>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field class="full-width">
                        <input matInput placeholder="Postal Code" formControlName="postalCode" name="postalCode"/>
                    </mat-form-field>
                </td>
            </tr>
        </table>

        <p>
            <mat-form-field class="full-width">
                <input matInput placeholder="Phone (ex: 0612345678)" formControlName="phone" required name="phone" />
                <mat-error *ngIf="form.get('phone').dirty && form.get('phone').hasError('required')">
                    Phone is <strong>required</strong>
                </mat-error>
                <mat-error *ngIf="form.get('phone').dirty && form.get('phone').hasError('pattern')">
                    Phone number must be <strong>10 digits</strong>
                </mat-error>
            </mat-form-field>
        </p>
    </form>
</mat-dialog-content>


<mat-dialog-actions align="end">
    <button mat-button type="button" (click)="cancel()">Cancel</button>
    <button mat-button color="primary" type="submit" (click)="submit(form.value)" [disabled]="form.invalid">Save</button>
</mat-dialog-actions>

