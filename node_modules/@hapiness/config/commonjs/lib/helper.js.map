{"version":3,"file":"helper.js","sourceRoot":"","sources":["../../../src/lib/helper.ts"],"names":[],"mappings":";;AAAA,+CAA8C;AAC9C,qCAAmD;AAEnD,MAAM,qBAAqB,GAAG,EAAE,CAAC;AACjC,MAAM,wBAAwB,GAAG,IAAI,6BAAc,CAAC,iBAAiB,CAAC,CAAC;AAOvE;IAEI,MAAM,CAAC,iBAAiB,CAAC,GAAY;QACjC,IAAI,CAAC,GAAG,EAAE;YACN,OAAO,wBAAwB,CAAC;SACnC;QAED,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,EAAE;YAC7B,qBAAqB,CAAC,GAAG,CAAC,GAAG,IAAI,6BAAc,CAAC,mBAAmB,GAAG,EAAE,CAAC,CAAC;SAC7E;QAED,OAAO,qBAAqB,CAAC,GAAG,CAAC,CAAC;IACtC,CAAC;IAED,MAAM,CAAC,WAAW,CAAC,GAAY,EAAE,KAAW;QACxC,MAAM,OAAO,GAAG,YAAY,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;QACpD,IAAI,GAAG,EAAE;YACL,4CAA4C;YAC5C,IAAI,CAAC,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI,CAAC,EAAE;gBAC/C,OAAO;oBACH,OAAO;oBACP,QAAQ,EAAE,eAAM,CAAC,eAAe,CAAC,KAAK,CAAC;iBAC1C,CAAA;aACJ;;YACG,kDAAkD;YAClD,+CAA+C;YACjD,IAAI,eAAM,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBACnB,OAAO;oBACH,OAAO;oBACP,QAAQ,EAAE,eAAM,CAAC,GAAG,CAAC,GAAG,CAAC;iBAC5B,CAAC;aACL;SACJ;QAED,kDAAkD;QAClD,OAAO;YACH,OAAO;YACP,QAAQ,EAAE,eAAM,CAAC,IAAI,EAAE;SAC1B,CAAC;IACN,CAAC;CAEJ;AAzCD,oCAyCC","sourcesContent":["import { InjectionToken } from 'injection-js';\nimport { Config, ConfigInterface } from './config';\n\nconst ConfigInjectionTokens = {};\nconst ConfigFileInjectionToken = new InjectionToken('HAPINESS_CONFIG');\n\nexport type ConfigProvider = {\n    provide: InjectionToken<any>,\n    useValue: ConfigInterface\n}\n\nexport class ConfigHelper {\n\n    static getInjectionToken(key?: string): InjectionToken<any> {\n        if (!key) {\n            return ConfigFileInjectionToken;\n        }\n\n        if (!ConfigInjectionTokens[key]) {\n            ConfigInjectionTokens[key] = new InjectionToken(`HAPINESS_CONFIG_${key}`);\n        }\n\n        return ConfigInjectionTokens[key];\n    }\n\n    static getProvider(key?: string, value?: any): ConfigProvider {\n        const provide = ConfigHelper.getInjectionToken(key);\n        if (key) {\n            // key and value provided, we load the value\n            if ((typeof value === 'object' && value !== null)) {\n                return {\n                    provide,\n                    useValue: Config.attachProtoDeep(value)\n                }\n            } else\n                // If we dont have any value but a key we check if\n                // the key exists in config and use it as value\n              if (Config.has(key)) {\n                return {\n                    provide,\n                    useValue: Config.get(key)\n                };\n            }\n        }\n\n        // Otherwise just return the default config object\n        return {\n            provide,\n            useValue: Config.load()\n        };\n    }\n\n}\n"]}